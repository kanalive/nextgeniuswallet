{"version":3,"sources":["../../src/pages/transfer/transfer.module.ts","../../src/pages/transfer/transfer.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TransferPage } from './transfer';\nimport { NgxQRCodeModule } from 'ngx-qrcode2';\n@NgModule({\n  declarations: [\n    TransferPage,\n  ],\n  imports: [\n    NgxQRCodeModule,\n    IonicPageModule.forChild(TransferPage),\n  ],\n})\nexport class TransferPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/transfer/transfer.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\nimport { RestProvider } from '../../providers/rest/rest';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\nimport { AlertController } from 'ionic-angular';\nimport { NgxQRCodeModule } from 'ngx-qrcode2';\n@IonicPage()\n@Component({\n  selector: 'page-transfer',\n  templateUrl: 'transfer.html',\n})\nexport class TransferPage {\n  //for hot wallet\n  latestBlock : any;\n  constructor(public navCtrl: NavController, private alertCtrl: AlertController, private barcodeScanner: BarcodeScanner, public navParams: NavParams, public restProvider: RestProvider,public loadingCtrl: LoadingController) {\n    \n  }\n\n  fromAccount=this.restProvider.account.address;\n  toAccount='';\n  amount:number;\n  show=false;\n  result;\n  accountBalance: any;\n  busy = false;\n  availableFund =0;\n  ONE_TRX = 1000000;\n\n  qrData = null;\n  createdCode = null;\n  scannedCode = null;\n\n  loading :any;\n\n  ionViewDidLoad() {\n    this.getAccountByAddress();\n    this.loading = this.loadingCtrl.create({\n      content: 'Loading account...'\n    });\n  \n    \n  }\n\n  getAccountByAddress(){\n    console.log(\"getbalance in transfer page called\");\n    this.restProvider.getAccountByAddress(this.fromAccount)\n    .then(data => {\n      console.log(this.accountBalance);\n      this.accountBalance = data;\n\n      this.availableFund = (data.balance)/this.ONE_TRX;\n      \n      console.log(data);\n    });\n  }\n\n  transfer(){\n    console.log(\"transfer in transfer page called\");\n    this.busy = true;\n    if(this.amount > this.availableFund){\n      alert(\"Insufficient account balance, transfer cancelled.\");\n    }else{\n      this.restProvider.send(\"TRX\", this.toAccount, this.amount)\n      .then(data => {\n        console.log(data);\n        if(data.success){\n          this.showConfirmAlert();\n          this.busy = false;\n          this.getAccountByAddress();\n        }else{\n          alert(data.message);\n        }\n      })\n    }\n    \n  }\n\n  showConfirmAlert() {\n    let alert = this.alertCtrl.create({\n        title: 'Transfer successful',\n        buttons: [\n            {\n                text: 'Ok',\n                handler: () => {\n                }\n            }\n        ]\n    });\n    alert.present();\n  }\n  \n\n\n\n  // logOut Function \n  logOut(){\n    this.navCtrl.setRoot('WelcomePage');\n  }\n\n  sendTransactionHexData(transactionHex){\n    this.restProvider.sendTransactionHex(transactionHex).then(data => {\n      console.log(data);\n      this.loading.dismiss();\n      alert(data);\n      \n    });\n  }\n\n  scanCode() {\n    this.barcodeScanner.scan().then(barcodeData => {\n      this.scannedCode = barcodeData.text;\n      let hex = JSON.parse(this.scannedCode);\n      this.sendTransactionHexData(hex);\n      this.loading.present();\n    }, (err) => {\n        console.log('Error: ', err);\n    });\n  }\n\n  getLatestBlock(){\n    this.restProvider.getLatestBlock().then(data =>{\n      console.log(data);\n      this.latestBlock = JSON.stringify(data);\n      this.createCode(this.latestBlock);\n    });\n    \n  }\n\n  createCode(data) {\n    this.createdCode = data;\n  }\n\n}  \n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/transfer/transfer.ts"],"sourceRoot":""}