{"version":3,"sources":["../../src/pages/transfer/transfer.module.ts","../../src/pages/transfer/transfer.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TransferPage } from './transfer';\n\n@NgModule({\n  declarations: [\n    TransferPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(TransferPage),\n  ],\n})\nexport class TransferPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/transfer/transfer.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { RestProvider } from '../../providers/rest/rest';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';\nimport { AlertController } from 'ionic-angular';\n\n@IonicPage()\n@Component({\n  selector: 'page-transfer',\n  templateUrl: 'transfer.html',\n})\nexport class TransferPage {\n\n  constructor(public navCtrl: NavController, private alertCtrl: AlertController, private qrScanner: QRScanner, public navParams: NavParams, public restProvider: RestProvider) {\n    this.getAccountByAddress();\n  }\n\n  fromAccount=this.restProvider.account.address;\n  toAccount='';\n  amount:number;\n  show=false;\n  result;\n  accountBalance: any;\n  busy = false;\n  availableFund =0;\n  ONE_TRX = 1000000;\n\n  getAccountByAddress(){\n    console.log(\"getbalance in transfer page called\");\n    this.restProvider.getAccountByAddress(this.fromAccount)\n    .then(data => {\n      console.log(this.accountBalance);\n      this.accountBalance = data;\n\n      this.availableFund = (data.balance)/this.ONE_TRX;\n      \n      console.log(data);\n    });\n  }\n\n  transfer(){\n    console.log(\"transfer in transfer page called\");\n    this.busy = true;\n    if(this.amount > this.availableFund){\n      alert(\"Insufficient account balance, transfer cancelled.\");\n    }else{\n      this.restProvider.send(\"TRX\", this.toAccount, this.amount)\n      .then(data => {\n        console.log(data);\n        if(data.success){\n          this.showConfirmAlert();\n          this.busy = false;\n          this.getAccountByAddress();\n        }else{\n          alert(data.message);\n        }\n      })\n    }\n    \n  }\n\n  showConfirmAlert() {\n    let alert = this.alertCtrl.create({\n        title: 'Transfer successful',\n        buttons: [\n            {\n                text: 'Ok',\n                handler: () => {\n                }\n            }\n        ]\n    });\n    alert.present();\n  }\n  \n  scan(){\n    // Optionally request the permission early\n    console.log(\"trying to scan\");\n    \n    this.qrScanner.prepare()\n    .then((status: QRScannerStatus) => {\n      if (status.authorized) {\n        // camera permission was granted\n\n        console.log(\"camera permission was granted\");\n\n        // start scanning\n        let scanSub = this.qrScanner.scan().subscribe((text: string) => {\n          console.log('Scanned something', text);\n          this.toAccount = text;\n          this.qrScanner.hide(); // hide camera preview\n          scanSub.unsubscribe(); // stop scanning\n        });\n\n      } else if (status.denied) {\n        console.log('camera permission was permanently denied');\n        \n        // camera permission was permanently denied\n        // you must use QRScanner.openSettings() method to guide the user to the settings page\n        // then they can grant the permission from there\n      } else {\n        // permission was denied, but not permanently. You can ask for permission again at a later time.\n        console.log('permission was denied, but not permanently');\n      }\n    })\n    .catch((e: any) => console.log('Error is', e));\n  }\n\n\n  // logOut Function \n  logOut(){\n    this.navCtrl.setRoot('WelcomePage');\n  }\n\n}  \n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/transfer/transfer.ts"],"sourceRoot":""}